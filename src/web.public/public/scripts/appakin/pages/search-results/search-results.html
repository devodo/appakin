<div id="search-results" class="main-wrapper" ng-cloak>
    <h1 class="search-type category" ng-if="isCategorySearch">
        Categories&nbsp;&nbsp;
        <a class="never-underline basic-button"
           href="{{url.createSearchUrl(resultSearchTerm, 'app', search.platform)}}">App Results</a>
    </h1>
    <h1 class="search-type app" ng-if="isAppSearch">
        Apps&nbsp;&nbsp;
        <a class="never-underline basic-button"
           href="{{url.createSearchUrl(resultSearchTerm, 'category', search.platform)}}">Category Results</a>
    </h1>
    <p class="error" ng-show="serverError">
        <span class="icon"></span>There was a problem getting your search result.
        Please try again, or if the problem persists please try later.
    </p>
    <div class="no-error-wrapper" ng-if="!serverError">
        <p class="info underline-on-hover"
           ng-show="!hasResults">
            <span class="icon"></span>No results found.<br/>
            <span ng-show="suggestion">Did you mean
                <a href="{{url.createSearchUrl(suggestion, searchType, search.platform)}}">{{suggestion}}</a>?
            </span>
        </p>
        <p class="hint" ng-if="isCategorySearch && hasResults">
            Click on a category to see all of its apps.
        </p>
        <div class="valid-results-wrapper" ng-show="hasResults">
            <div class="list-wrapper" ng-class="search.searchInProgress ? 'disabled' : ''">
                <ul ng-show="isCategorySearch">
                    <li ng-repeat="category in resultItems"
                        class="category-search-result">
                        <h4>
                            <a class="underline-on-hover"
                               ng-bind-html="category.highlight && category.highlight.name_split ? category.highlight.name_split : category.name"
                               href="{{ url.createCategoryUrl(category.platform, category.url) }}"></a>
                        </h4>
                        <div class="category-match" ng-if="category.isCategoryMatch">
                            <p class="description" ng-bind-html="'&hellip; ' + category.highlight.desc[0] + ' &hellip;'"></p>
                        </div>
                        <div class="app-match" ng-if="!category.isCategoryMatch">
                            <ul class="category-apps">
                                <li class="category-app"ng-repeat="app in category.apps | limitTo: 4">
                                    <a class="img-wrapper" href="{{ url.createAppUrl(app.platform, app.url) }}" ><img ng-src="{{app.imageUrl}}"></a>
                                    <h6><a class="underline-on-hover" href="{{ url.createAppUrl(app.platform, app.url) }}" ng-bind-html="app.name | trim: 30"></a></h4>
                                </li>
                            </ul>
                          </div>
                    </li>
                </ul>
                <ul ng-show="isAppSearch">
                    <li ng-repeat="app in resultItems track by app.url"
                        class="app-search-result">
                        <a href="{{ url.createAppUrl(app.platform, app.url) }}">
                            <img ng-src="{{app.imageUrl}}">
                        </a>
                        <h4>
                            <a class="underline-on-hover"
                               href="{{ url.createAppUrl(app.platform, app.url) }}"
                               ng-bind-html="app.name | trim: 50 | highlight: resultSearchTerm"></a>
                        </h4>
                        <p class="tight-lines" ng-bind-html="app.highlight"></p>
                    </li>
                </ul>
            </div>
            <div class="pagination-wrapper">
                <div class="centering-wrapper">
                    <div pagination
                         ng-show="resultTotalItems > 0"
                         total-items="resultTotalItems"
                         max-size="numPages"
                         ng-model="search.currentPage"
                         ng-change="pageChanged()"
                         previous-text="" next-text=""></div>
                </div>
            </div>
        </div>
    </div>
</div>